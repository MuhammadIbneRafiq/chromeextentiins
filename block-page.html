<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Site Blocked - AI Productivity Guardian</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            padding: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .icon {
            font-size: 80px;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        h1 {
            font-size: 48px;
            font-weight: 300;
            margin-bottom: 20px;
            animation: fadeIn 1s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .subtitle {
            font-size: 24px;
            margin-bottom: 20px;
            opacity: 0.9;
            animation: fadeIn 1s ease-in 0.2s both;
        }

        .site-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin: 30px 0;
            animation: fadeIn 1s ease-in 0.4s both;
        }

        .blocked-site {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #fbbf24;
        }

        .reason {
            font-size: 16px;
            opacity: 0.8;
        }

        .alternatives {
            margin: 30px 0;
            animation: fadeIn 1s ease-in 0.6s both;
        }

        .alternatives h3 {
            font-size: 18px;
            margin-bottom: 20px;
            opacity: 0.9;
        }

        .links {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .link {
            display: inline-block;
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            text-decoration: none;
            color: white;
            font-weight: 500;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .link:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .actions {
            margin-top: 40px;
            animation: fadeIn 1s ease-in 0.8s both;
        }

        .btn {
            display: inline-block;
            padding: 15px 30px;
            margin: 0 10px;
            border: 2px solid white;
            border-radius: 30px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            text-decoration: none;
            font-weight: 500;
            font-size: 16px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .btn-primary {
            background: rgba(255, 255, 255, 0.2);
        }

        .stats {
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            animation: fadeIn 1s ease-in 1s both;
        }

        .stats h4 {
            margin-bottom: 15px;
            font-size: 16px;
            opacity: 0.8;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            display: block;
            font-size: 24px;
            font-weight: 700;
            color: #fbbf24;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.7;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .motivational {
            margin-top: 20px;
            font-style: italic;
            opacity: 0.8;
            animation: fadeIn 1s ease-in 1.2s both;
        }

        @media (max-width: 600px) {
            .container {
                padding: 30px 20px;
            }

            h1 {
                font-size: 36px;
            }

            .subtitle {
                font-size: 20px;
            }

            .links {
                flex-direction: column;
                align-items: center;
            }

            .actions {
                display: flex;
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="icon">üö´</div>
        <h1>Stay Focused!</h1>
        <p class="subtitle">This site has been blocked to help you stay productive</p>
        
        <div class="site-info">
            <div class="blocked-site" id="blockedSite">Loading...</div>
            <div class="reason" id="blockReason">Loading...</div>
        </div>

        <div class="alternatives">
            <h3>üéØ Try these productive alternatives instead:</h3>
            <div class="links">
                <a href="https://stackoverflow.com" class="link">üìö Stack Overflow</a>
                <a href="https://github.com" class="link">üíª GitHub</a>
                <a href="https://coursera.org" class="link">üéì Coursera</a>
                <a href="https://developer.mozilla.org" class="link">üìñ MDN Docs</a>
                <a href="https://www.khanacademy.org" class="link">üß† Khan Academy</a>
            </div>
        </div>

        <div class="actions">
            <button class="btn btn-primary" onclick="goBack()">‚¨ÖÔ∏è Go Back</button>
            <button class="btn" onclick="openSettings()">‚öôÔ∏è Settings</button>
        </div>

        <div class="stats" id="stats">
            <h4>üìä Your Productivity Stats Today</h4>
            <div class="stat-grid">
                <div class="stat-item">
                    <span class="stat-number" id="blockedCount">0</span>
                    <span class="stat-label">Sites Blocked</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="timesSaved">0</span>
                    <span class="stat-label">Minutes Saved</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="focusStreak">1</span>
                    <span class="stat-label">Focus Streak</span>
                </div>
            </div>
        </div>

        <div class="motivational">
            <p id="motivationalQuote">"Success is the sum of small efforts repeated day in and day out."</p>
        </div>
    </div>

    <script>
        const motivationalQuotes = [
            "Success is the sum of small efforts repeated day in and day out.",
            "Focus on being productive instead of busy.",
            "The key to success is to focus on goals, not obstacles.",
            "Your future is created by what you do today, not tomorrow.",
            "Small progress is still progress.",
            "Discipline is choosing between what you want now and what you want most.",
            "The expert in anything was once a beginner.",
            "Every moment is a fresh beginning.",
            "You don't have to be great to get started, but you have to get started to be great.",
            "Success is not final, failure is not fatal: it is the courage to continue that counts."
        ];

        function init() {
            // Get URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            const site = urlParams.get('site') || 'Unknown site';
            const reason = urlParams.get('reason') || 'Site blocked for productivity';

            // Update page content
            document.getElementById('blockedSite').textContent = site;
            document.getElementById('blockReason').textContent = reason;

            // Load stats
            loadStats();

            // Show random motivational quote
            const randomQuote = motivationalQuotes[Math.floor(Math.random() * motivationalQuotes.length)];
            document.getElementById('motivationalQuote').textContent = `"${randomQuote}"`;
        }

        async function loadStats() {
            try {
                const result = await chrome.storage.local.get(['blockedEvents']);
                const events = result.blockedEvents || [];
                
                // Count today's blocks
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                const todayEvents = events.filter(event => event.timestamp >= today.getTime());
                
                document.getElementById('blockedCount').textContent = todayEvents.length;
                
                // Estimate time saved (5 minutes per block)
                const timesSaved = todayEvents.length * 5;
                document.getElementById('timesSaved').textContent = timesSaved;
                
                // Calculate focus streak (consecutive days with blocks)
                const focusStreak = calculateFocusStreak(events);
                document.getElementById('focusStreak').textContent = focusStreak;
                
            } catch (error) {
                console.error('Error loading stats:', error);
            }
        }

        function calculateFocusStreak(events) {
            if (events.length === 0) return 0;
            
            const today = new Date();
            let streak = 0;
            let currentDate = new Date(today);
            
            for (let i = 0; i < 30; i++) { // Check last 30 days
                currentDate.setHours(0, 0, 0, 0);
                const dayStart = currentDate.getTime();
                const dayEnd = dayStart + 86400000; // 24 hours
                
                const dayEvents = events.filter(event => 
                    event.timestamp >= dayStart && event.timestamp < dayEnd
                );
                
                if (dayEvents.length > 0) {
                    streak++;
                } else if (streak > 0) {
                    break; // Streak broken
                }
                
                currentDate.setDate(currentDate.getDate() - 1);
            }
            
            return streak;
        }

        function goBack() {
            if (window.history.length > 1) {
                window.history.back();
            } else {
                window.location.href = 'https://www.google.com';
            }
        }

        function openSettings() {
            // This will open the extension popup
            // Note: This might not work directly, but provides the intent
            try {
                chrome.runtime.openOptionsPage();
            } catch (error) {
                // Fallback: provide instructions
                alert('To access settings, click the extension icon in your browser toolbar.');
            }
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', init);

        // Auto-redirect after 30 seconds (optional)
        setTimeout(() => {
            const autoRedirect = confirm('Would you like to be redirected to a productive site?');
            if (autoRedirect) {
                window.location.href = 'https://stackoverflow.com';
            }
        }, 30000);
    </script>
</body>
</html>